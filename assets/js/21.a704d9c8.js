(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{463:function(a,s,e){"use strict";e.r(s);var r=e(2),t=Object(r.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"title"}),s("p",[s("font",{attrs:{size:"5"}},[a._v("Reference")])],1),a._v(" "),s("p",[s("a",{attrs:{href:"https://docs.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方文档"),s("OutboundLink")],1)]),a._v(" "),s("p",[s("a",{attrs:{href:"https://b11et3un53m.feishu.cn/wiki/Rfocw7ctXij2RBkShcucLZbrn2d",target:"_blank",rel:"noopener noreferrer"}},[a._v("云文档笔记"),s("OutboundLink")],1)])]),s("h2",{attrs:{id:"环境准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#环境准备"}},[a._v("#")]),a._v(" 环境准备")]),a._v(" "),s("h3",{attrs:{id:"安装docker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[a._v("#")]),a._v(" 安装Docker")]),a._v(" "),s("ol",[s("li",[s("p",[a._v("在VMWare上安装CentOS系统")])]),a._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://docs.docker.com/engine/install/centos/",target:"_blank",rel:"noopener noreferrer"}},[a._v("在CentOS系统上安装Docker"),s("OutboundLink")],1)])]),a._v(" "),s("li",[s("p",[a._v("配置镜像加速")])])]),a._v(" "),s("h3",{attrs:{id:"docker基本原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker基本原理"}},[a._v("#")]),a._v(" Docker基本原理")]),a._v(" "),s("ul",[s("li",[s("strong",[a._v("镜像（image）")]),a._v("： Docker 镜像就像软件安装包（比如 .exe 安装文件或 .iso 系统镜像）。它是一个模板，包含了应用程序及其运行环境（如操作系统、依赖库等）。")]),a._v(" "),s("li",[s("strong",[a._v("容器（container）")]),a._v("：容器是镜像的实例，它是一个可运行的实例，包含了应用程序和运行环境。容器可以启动、停止、删除、迁移等。")]),a._v(" "),s("li",[s("strong",[a._v("仓库（repository）")]),a._v("：仓库是镜像的存储库，它包含多个镜像。仓库可以是公共的或私有的（如企业内部的仓库）。 Docker官方提供的"),s("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("Docker Hub"),s("OutboundLink")],1),a._v(" 是一个公共的仓库，它包含许多官方的镜像。")])]),a._v(" "),s("img",{attrs:{decoding:"async",src:"/images/250107_01.png",width:"90%"}}),a._v(" "),s("h3",{attrs:{id:"使用docker下载mysql"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用docker下载mysql"}},[a._v("#")]),a._v(" 使用Docker下载MySql")]),a._v(" "),s("p",[s("code",[a._v("docker run")]),a._v("命令会自动拉取镜像，然后创建容器。")]),a._v(" "),s("img",{attrs:{decoding:"async",src:"/images/250107_02.png",width:"90%"}}),a._v(" "),s("p",[a._v("以上命令运行完成之后，即可使用mysql，非常方便。")]),a._v(" "),s("h2",{attrs:{id:"docker基础"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker基础"}},[a._v("#")]),a._v(" Docker基础")]),a._v(" "),s("p",[a._v("详细信息可以查看 👉 "),s("a",{attrs:{href:"https://docs.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("官方文档"),s("OutboundLink")],1)]),a._v(" "),s("h3",{attrs:{id:"docker常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker常用命令"}},[a._v("#")]),a._v(" Docker常用命令")]),a._v(" "),s("ul",[s("li",[a._v("拉取镜像 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/image/pull/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker pull"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("在"),s("code",[a._v("Docker Hub")]),a._v("上搜索你想要安装的镜像，然后使用"),s("code",[a._v("docker pull")]),a._v("命令拉取镜像，下面以安装nginx镜像为例，不指定版本号，默认使用"),s("code",[a._v("latest")]),a._v("版本。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" pull nginx:latest\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("查看镜像 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/image/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker images"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("查看镜像是否拉取成功，使用"),s("code",[a._v("docker images")]),a._v("命令查看镜像列表。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" images\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("保存镜像 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/image/save/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker save"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("docker save")]),a._v("命令，将镜像保存到本地tar文件中, 这样做的好处有：1. 将镜像备份到本地，防止镜像丢失，方便后续恢复；2. 在离线状态可以将镜像传输到其他机器上；3. 方便将镜像推送到远程仓库。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" save "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-o")]),a._v(" nginx.tar nginx:latest\n\nll "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看文件是否保存成功")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("ul",[s("li",[a._v("删除镜像 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/image/rmi/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker rmi"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("保存到本地之后可以使用"),s("code",[a._v("docker rmi")]),a._v("命令删除镜像")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" rmi nginx:latest\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("加载镜像 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/image/load/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker load"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("想要将删除的镜像重新加载到本地，可以使用"),s("code",[a._v("docker load")]),a._v("命令。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" load "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-i")]),a._v(" nginx.tar\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("运行镜像 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/run/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker run"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("docker run")]),a._v("命令运行镜像，以安装nginx镜像为例。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 nginx:latest\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("查看容器 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/ps/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker ps"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("docker ps")]),a._v("命令查看容器状态列表。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示正在运行的容器")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ps")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-a")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 显示所有容器")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("ul",[s("li",[a._v("进入容器 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/exec/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker exec"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("可以使用"),s("code",[a._v("docker exec")]),a._v("命令进入容器内部，方便进行编辑配置文件、修改环境变量等操作。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v("exec")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-it")]),a._v(" nginx "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("bash")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 进入容器并打开bash终端")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("停止容器 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/stop/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker stop"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("docker stop")]),a._v("命令停止容器。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" stop nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("开启容器 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/start/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker start"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("docker start")]),a._v("命令开启容器。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" start nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("删除容器 "),s("a",{attrs:{href:"https://docs.docker.com/reference/cli/docker/rm/",target:"_blank",rel:"noopener noreferrer"}},[a._v("docker rm"),s("OutboundLink")],1)])]),a._v(" "),s("p",[a._v("使用"),s("code",[a._v("docker rm")]),a._v("命令删除容器, 删除容器之前需要先停止容器。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" nginx\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("h3",{attrs:{id:"数据卷"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#数据卷"}},[a._v("#")]),a._v(" 数据卷")]),a._v(" "),s("p",[s("strong",[a._v("数据卷（volume）")]),a._v(": Docker 容器和宿主机之间的一个目录映射（虚拟目录、逻辑概念）。")]),a._v(" "),s("p",[s("strong",[a._v("数据卷的作用")]),a._v("：")]),a._v(" "),s("ul",[s("li",[s("p",[a._v("一方面，容器的文件系统是临时的，当容器删除或重建时，容器内部的数据会丢失。数据卷提供了一种方式，使数据能够独立于容器的生命周期存在，即使容器删除或重建，数据仍然保留。")])]),a._v(" "),s("li",[s("p",[a._v("另一方面，容器中只包含了程序运行的最基本环境，数据卷使容器能够使用宿主机的数据。")])])]),a._v(" "),s("p",[a._v("下图中，将Nignx容器下的目录映射到宿主机的目录，实现了这两个目录中数据的"),s("strong",[a._v("双向绑定")]),a._v("。")]),a._v(" "),s("img",{attrs:{decoding:"async",src:"/images/250107_03.png",width:"90%"}}),a._v(" "),s("p",[a._v("👉 常用命令 👇")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--help")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看volume下的所有命令")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" inspect "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看容器下的所有数据卷信息")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("实现数据卷和容器目录间的映射，挂载数据卷（挂载完成后宿主机目录会默认创建）")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("rm")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-f")]),a._v(" nginx "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 需要先删除容器")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" nginx "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("80")]),a._v(":80 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" html:/usr/share/nginx/html nginx:latest "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 挂载数据卷")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br")])]),s("ul",[s("li",[a._v("查看数据卷")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("ls")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("查看数据卷详细信息（可以看到对应的宿主机目录）")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" volume inspect html\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br")])]),s("ul",[s("li",[a._v("实现宿主机目录和容器目录的直接映射（事先创建好自定义宿主机目录）")])]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("3306")]),a._v(":3306 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("TZ")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("Asia/Shanghai "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-e")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[a._v("MYSQL_ROOT_PASSWORD")]),s("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("123456")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/mysql/data:/var/lib/mysql "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/mysql/conf:/etc/mysql/conf.d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-v")]),a._v(" /root/mysql/init:/docker-entrypoint-initdb.d "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n    mysql:latest\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br")])]),s("h3",{attrs:{id:"构建镜像"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#构建镜像"}},[a._v("#")]),a._v(" 构建镜像")]),a._v(" "),s("p",[a._v("以构建Java应用程序的镜像为例：")]),a._v(" "),s("img",{attrs:{decoding:"async",src:"/images/250107_04.png",width:"85%"}}),a._v(" "),s("p",[a._v("镜像分为很多层，已经构建好的层可以重复使用（无需二次下载），从而提高构建速度。")]),a._v(" "),s("p",[a._v("编写Dockerfile文件：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 选择基础镜像（使用 OpenJDK 17，可根据需求修改）")]),a._v("\nFROM openjdk:17-jdk-slim\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 复制本地构建好的 Jar 包到容器内的/app.jar中")]),a._v("\nCOPY xxx-demo.jar /app.jar\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 暴露端口（如 Spring Boot 默认端口 8080）")]),a._v("\nEXPOSE "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 运行 Java 应用程序")]),a._v("\nENTRYPOINT "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"java"')]),a._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"-jar"')]),a._v(", "),s("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/app.jar"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br")])]),s("p",[a._v("进入到Dockerfile文件所在目录，执行以下命令运行Dockerfile文件：")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" build "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-t")]),a._v(" xxx-image "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(".")]),a._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 构建镜像")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-p")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[a._v("8080")]),a._v(":8080 "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" xxx xxx-image "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 运行镜像")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br")])]),s("h3",{attrs:{id:"自定义网络"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#自定义网络"}},[a._v("#")]),a._v(" 自定义网络")]),a._v(" "),s("p",[a._v("Docker 默认使用一个名为 "),s("code",[a._v("bridge")]),a._v(" 的网络，该网络将容器连接到一个虚拟网卡上，以实现容器之间的通信。但是，默认网络中的容器之间进行通信时，需要使用容器的 IP 地址进行通信，这会增加网络的复杂性和维护成本。因此，我们可以自定义网络，同一个自定义网络中的容器之间可以"),s("strong",[a._v("通过容器名进行通信")]),a._v("，从而简化网络配置和操作。")]),a._v(" "),s("div",{staticClass:"language-bash line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network create my-network "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 创建自定义网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network connect my-network nginx "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 将nginx容器连接到自定义网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" run "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("-d")]),a._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--name")]),a._v(" mysql "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[a._v("--network")]),a._v(" my-network mysql:latest "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 在创建mysql容器时连接到自定义网络")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("docker")]),a._v(" network inspect my-network "),s("span",{pre:!0,attrs:{class:"token comment"}},[a._v("# 查看自定义网络详细信息")]),a._v("\n")])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br")])]),s("p",[a._v("运行以上命令后，"),s("code",[a._v("nginx")]),a._v("容器和"),s("code",[a._v("mysql")]),a._v("容器连接到同一个自定义网络"),s("code",[a._v("my-network")]),a._v("，这两个容器现在可以通过容器名进行互相通信，大大简化操作复杂性。")])])}),[],!1,null,null,null);s.default=t.exports}}]);